<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Farokh Panahirad">
<meta name="keywords" content="Circular Economy, Building Retrofit, BIM, IoT, AI, Digital Twins">
<meta name="description" content="Exploring a four-phase, technology-enabled retrofit methodology to embed Circular Economy principles into aging buildings.">

<title>A Comprehensive Digital Integration Framework for Circular Economy in Existing Building Retrofits – Farokh Panahirad</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-6064eead220a12dfabbe5ed688011e95.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark-f8efa3d1fb184b9397def8e1c1563c2c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    mediumZoom('img.zoomable', {
      margin: 24,
      background: '#000',
    })
  })
</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Farokh Panahirad</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../cv.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">1. Introduction</a>
  <ul class="collapse">
  <li><a href="#assessment" id="toc-assessment" class="nav-link" data-scroll-target="#assessment">4.1 Assessment</a></li>
  <li><a href="#planning" id="toc-planning" class="nav-link" data-scroll-target="#planning">4.2 Planning</a></li>
  <li><a href="#execution" id="toc-execution" class="nav-link" data-scroll-target="#execution">4.3 Execution</a></li>
  <li><a href="#monitoring-optimization" id="toc-monitoring-optimization" class="nav-link" data-scroll-target="#monitoring-optimization">4.4 Monitoring &amp; Optimization</a></li>
  </ul></li>
  <li><a href="#potential-benefits-and-challenges" id="toc-potential-benefits-and-challenges" class="nav-link" data-scroll-target="#potential-benefits-and-challenges">5. Potential Benefits and Challenges</a>
  <ul class="collapse">
  <li><a href="#benefits-of-a-four-phase-digitally-enabled-retrofit" id="toc-benefits-of-a-four-phase-digitally-enabled-retrofit" class="nav-link" data-scroll-target="#benefits-of-a-four-phase-digitally-enabled-retrofit">5.1 Benefits of a Four-Phase, Digitally Enabled Retrofit</a></li>
  <li><a href="#key-challenges-to-implementation" id="toc-key-challenges-to-implementation" class="nav-link" data-scroll-target="#key-challenges-to-implementation">5.2 Key Challenges to Implementation</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">6. Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">A Comprehensive Digital Integration Framework for Circular Economy in Existing Building Retrofits</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Circular Economy</div>
    <div class="quarto-category">Building Retrofit</div>
    <div class="quarto-category">BIM</div>
    <div class="quarto-category">IoT</div>
    <div class="quarto-category">AI</div>
    <div class="quarto-category">Digital Twins</div>
  </div>
  </div>

<div>
  <div class="description">
    Exploring a four-phase, technology-enabled retrofit methodology to embed Circular Economy principles into aging buildings.
  </div>
</div>

<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Farokh Panahirad, PhD Student <a href="mailto:f.panahirad@aui.ac.ir" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0009-0008-5691-2240" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Art University of Isfahan
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March, 2025</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p>The construction industry consumes over one-third of global energy and significantly depletes raw materials, underscoring a pressing need for more sustainable methods. Among emerging approaches, the Circular Economy (CE) framework is particularly relevant, promoting reduced waste, extended material lifespans, and closed-loop resource cycles. This paper proposes a four-phase digital integration framework designed to embed CE principles into existing building retrofits, leveraging Building Information Modeling (BIM), the Internet of Things (IoT), Artificial Intelligence (AI), and Digital Twins. The framework systematically addresses the Assessment, Planning, Execution, and Monitoring &amp; Optimization stages of retrofitting, helping stakeholders achieve higher material reuse, optimized resource consumption, and enhanced post-retrofit performance. While challenges related to cost, regulation, and data-sharing persist, this work demonstrates how a structured, technology-assisted process can help practitioners, policymakers, and researchers make informed decisions about bringing existing buildings closer to a circular future.</p>
  </div>
</div>

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>Circular Economy, Building Retrofit, BIM, IoT, AI, Digital Twins</p>
  </div>
</div>

</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">1. Introduction</h2>
<p>Over one-third of the world’s final energy consumption and a considerable fraction of greenhouse gas emissions are tied to the built environment <span class="citation" data-cites="iea2019 unep2019"><a href="#ref-iea2019" role="doc-biblioref">[1]</a>, <a href="#ref-unep2019" role="doc-biblioref">[2]</a></span>. Alongside these energy demands, the construction sector is also responsible for extensive resource extraction and material waste, as traditional linear processes (extract → build → demolish) fail to recover significant value at a building’s end of life <span class="citation" data-cites="ding2016 lu2013"><a href="#ref-ding2016" role="doc-biblioref">[3]</a>, <a href="#ref-lu2013" role="doc-biblioref">[4]</a></span>. The Circular Economy (CE) has gained attention as a means to mitigate these impacts, urging the industry to close resource loops through reusing, recycling, and extending the lifespan of building materials <span class="citation" data-cites="ellenmacarthur2013 kirchherr2017 pomponi2017"><a href="#ref-ellenmacarthur2013" role="doc-biblioref">[5]</a>, <a href="#ref-kirchherr2017" role="doc-biblioref">[6]</a>, <a href="#ref-pomponi2017" role="doc-biblioref">[7]</a></span>. While CE adoption in new construction has steadily advanced, existing buildings—which constitute the majority of the built environment—pose additional complexities <span class="citation" data-cites="adams2017 korhonen2018 leising2018"><a href="#ref-adams2017" role="doc-biblioref">[8]</a>, <a href="#ref-korhonen2018" role="doc-biblioref">[9]</a>, <a href="#ref-leising2018" role="doc-biblioref">[10]</a></span>. Retrofitting can entail dealing with heterogeneous building conditions, outdated structural designs, hazardous materials, and stakeholders with varying priorities. These realities make it harder to standardize or systematize circular strategies. Recent years have seen a rapid digital transformation, with tools like Building Information Modeling (BIM), the Internet of Things (IoT), Artificial Intelligence (AI), and Digital Twins offering new ways to plan, execute, and monitor CE interventions <span class="citation" data-cites="adams2022 akbarieh2020 boje2020 hossain2020"><a href="#ref-adams2022" role="doc-biblioref">[11]</a>, <a href="#ref-akbarieh2020" role="doc-biblioref">[12]</a>, <a href="#ref-boje2020" role="doc-biblioref">[13]</a>, <a href="#ref-hossain2020" role="doc-biblioref">[14]</a></span>. Yet many research efforts focus on individual technologies or on newly built, “greenfield” projects <span class="citation" data-cites="damico2021 hart2019 hosseini2021 geissdoerfer2017"><a href="#ref-damico2021" role="doc-biblioref">[15]</a>, <a href="#ref-hart2019" role="doc-biblioref">[16]</a>, <a href="#ref-hosseini2021" role="doc-biblioref">[17]</a>, <a href="#ref-geissdoerfer2017" role="doc-biblioref">[18]</a></span>. As a result, there is a need for an integrated framework that assembles multiple digital solutions into a cohesive lifecycle for retrofits, addressing the practical barriers of cost, regulation, data sharing, and stakeholder misalignment. Accordingly, this paper proposes a four-phase strategy—covering Assessment, Planning, Execution, and Monitoring &amp; Optimization—and explains how each digital tool supports CE objectives at each stage. In doing so, the paper aims to answer the following overarching questions: • How can digital technologies be leveraged to systematically enhance circular outcomes in retrofitting existing buildings? • What are the critical barriers to adoption, and how does a phased approach help practitioners overcome them? • Which benefits—material reuse, lower energy consumption, better occupant experience—are most attainable, and what constraints remain? Addressing these questions will establish a roadmap that enables policymakers, industry professionals, and researchers to integrate Circular Economy principles into a sector traditionally characterized by linear processes.   ## 2. Literature Review ### 2.1 Circular Economy in Construction The CE model emphasizes minimizing raw material use, reducing and recirculating waste, and designing “closed loops” where end-of-life building components can be transformed into new resources <span class="citation" data-cites="ellenmacarthur2013 kirchherr2017 pomponi2017"><a href="#ref-ellenmacarthur2013" role="doc-biblioref">[5]</a>, <a href="#ref-kirchherr2017" role="doc-biblioref">[6]</a>, <a href="#ref-pomponi2017" role="doc-biblioref">[7]</a></span>. In the construction industry, these principles translate into design for disassembly, prioritizing secondary materials, and adopting lifecycle assessments to gauge total environmental footprints <span class="citation" data-cites="kirchherr2017 pomponi2017"><a href="#ref-kirchherr2017" role="doc-biblioref">[6]</a>, <a href="#ref-pomponi2017" role="doc-biblioref">[7]</a></span>. Despite clear theoretical benefits—such as reduced landfill burdens and lower embodied carbon—practical application in existing buildings lags behind. Older structures are often saddled with unforeseen costs, especially if hazardous materials (like asbestos) must be carefully removed or if certain structural elements cannot be easily reused <span class="citation" data-cites="adams2017 korhonen2018"><a href="#ref-adams2017" role="doc-biblioref">[8]</a>, <a href="#ref-korhonen2018" role="doc-biblioref">[9]</a></span>. Variability in building codes across jurisdictions can further hamper the large-scale application of CE principles, particularly in retrofits that necessitate creative technical solutions or partial demolition <span class="citation" data-cites="leising2018"><a href="#ref-leising2018" role="doc-biblioref">[10]</a></span>. ### 2.2 Digital Technologies as Enablers Technological advancements in construction informatics have opened new frontiers for implementing CE: • BIM (Building Information Modeling): Provides detailed data about building components, enabling more accurate material inventories, clash detection, and waste minimization strategies <span class="citation" data-cites="volk2014 won2017"><a href="#ref-volk2014" role="doc-biblioref">[19]</a>, <a href="#ref-won2017" role="doc-biblioref">[20]</a></span>. • IoT (Internet of Things): Deployed sensors can track energy and resource use in real time, informing data-driven strategies for occupant comfort and resource optimization <span class="citation" data-cites="ding2019"><a href="#ref-ding2019" role="doc-biblioref">[21]</a></span>. • AI (Artificial Intelligence): Machine learning algorithms support predictive analyses—e.g., identifying cost-effective retrofit options or anticipating component failure <span class="citation" data-cites="ahmad2016"><a href="#ref-ahmad2016" role="doc-biblioref">[22]</a></span>. • Digital Twins: Virtual replicas of physical assets that allow simulation-based testing, real-time performance evaluation, and scenario planning to adapt to occupant changes or new policy environments <span class="citation" data-cites="boje2020 lu2020"><a href="#ref-boje2020" role="doc-biblioref">[13]</a>, <a href="#ref-lu2020" role="doc-biblioref">[23]</a></span>. Although each tool has proven its value in discrete contexts (e.g., BIM for new builds or IoT for smart offices), few frameworks combine these digital technologies seamlessly across the full retrofit lifecycle, which often involves partial demolition, reconfiguration, or occupant relocation <span class="citation" data-cites="damico2021 hart2019 hosseini2021 geissdoerfer2017"><a href="#ref-damico2021" role="doc-biblioref">[15]</a>, <a href="#ref-hart2019" role="doc-biblioref">[16]</a>, <a href="#ref-hosseini2021" role="doc-biblioref">[17]</a>, <a href="#ref-geissdoerfer2017" role="doc-biblioref">[18]</a></span>. ### 2.3 Gaps in Existing Frameworks Studies focusing on digital solutions for retrofits frequently address either energy performance or material reuse but seldom adopt a holistic lens <span class="citation" data-cites="hart2019 geissdoerfer2017"><a href="#ref-hart2019" role="doc-biblioref">[16]</a>, <a href="#ref-geissdoerfer2017" role="doc-biblioref">[18]</a></span>. Interoperability challenges also arise, as data generated by different tools (BIM vs.&nbsp;IoT) may lack compatible formats <span class="citation" data-cites="hosseini2021"><a href="#ref-hosseini2021" role="doc-biblioref">[17]</a></span>. Meanwhile, smaller construction firms find it difficult to shoulder the training costs required for advanced digital solutions <span class="citation" data-cites="adams2017 korhonen2018 hosseini2021"><a href="#ref-adams2017" role="doc-biblioref">[8]</a>, <a href="#ref-korhonen2018" role="doc-biblioref">[9]</a>, <a href="#ref-hosseini2021" role="doc-biblioref">[17]</a></span>. In this context, a unified model is needed—one that prescribes how digital technologies can support specific CE outcomes (e.g., resource recovery, waste reduction) at each stage of an existing building’s life. ## 3. Methodology ### 3.1 Literature Review Approach This study synthesized findings from over 80 peer-reviewed articles and reports retrieved from Scopus, Web of Science, and IEEE Xplore using search terms like “circular economy,” “building retrofit,” “BIM and demolition waste,” and “IoT-based energy management.” Screening criteria included a direct focus on either retrofits or digital solutions for the construction industry, as well as an emphasis on resource circulation or lifecycle optimization. The final set of sources informed both the conceptual design of our framework and the identification of major barriers. ### 3.2 Framework Design This study developed a four-phase framework—comprising Assessment, Planning, Execution, and Monitoring &amp; Optimization—derived from the recurring stages of retrofit projects and the practical integration of digital tools at each phase. This methodology was refined through a thematic analysis of case examples from the literature, with particular emphasis on projects employing multiple technologies (e.g., BIM and IoT). ### 3.3 Study Scope This paper offers a conceptual model rather than an empirical deep dive into specific building retrofits. Future studies might operationalize and further validate the framework by applying it to real-world contexts with diverse building typologies. Nonetheless, the structure presented here provides a theoretical blueprint for stakeholders looking to systematically incorporate CE strategies. ## 4. The Digital Integration Framework To accommodate the complexities of existing buildings and to maximize material reuse and resource efficiency, the proposed framework is divided into four stages: Assessment, Planning, Execution, and Monitoring &amp; Optimization. Each stage targets different CE objectives and employs specific digital tools.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figure1.png" class="zoomable img-fluid figure-img"></p>
<figcaption><em>Figure 1: Framework Overview Diagram</em></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figure2.png" class="zoomable img-fluid figure-img"></p>
<figcaption><em>Figure 2: Lifecycle Diagram of the Framework</em></figcaption>
</figure>
</div>
<section id="assessment" class="level3">
<h3 class="anchored" data-anchor-id="assessment">4.1 Assessment</h3>
<p><strong>Objective</strong>: Evaluate the current state of the building, including material inventories, structural health, and potential hazards.</p>
<ul>
<li><strong>BIM</strong>: A scan-to-BIM process can capture the geometry of older buildings, which may not have up-to-date architectural plans <span class="citation" data-cites="volk2014"><a href="#ref-volk2014" role="doc-biblioref">[19]</a></span>. This 3D model includes detailed attributes—such as material type, expected remaining life, and salvageability.<br>
</li>
<li><strong>Digital Twins</strong>: After establishing a baseline BIM, digital twins can virtually model structural integrity, airflow, or occupant movement patterns. This is especially useful in heritage buildings where extensive physical probes could damage historical features <span class="citation" data-cites="boje2020"><a href="#ref-boje2020" role="doc-biblioref">[13]</a></span>.</li>
</ul>
<p>A thorough Assessment phase sets the groundwork for informed retrofit decisions, ensuring that no critical information—like the presence of hazardous substances or repairable beams—is overlooked.</p>
</section>
<section id="planning" class="level3">
<h3 class="anchored" data-anchor-id="planning">4.2 Planning</h3>
<p><strong>Objective</strong>: Develop a retrofit plan that maximizes CE outcomes—minimizing waste, ensuring high reuse of building components, and enhancing energy performance.</p>
<ul>
<li><strong>AI</strong>: Machine learning or optimization algorithms can weigh multiple variables (cost, carbon footprint, occupant comfort) to recommend an optimal retrofit scenario <span class="citation" data-cites="ahmad2016"><a href="#ref-ahmad2016" role="doc-biblioref">[22]</a></span>. For instance, AI might predict which combination of insulation strategies and material substitutions yields the largest energy savings per dollar spent.<br>
</li>
<li><strong>Stakeholder Engagement</strong>: Achieving buy-in from property owners, tenants, and local authorities is crucial. Virtual Reality (VR) visualizations—layered on top of BIM—help stakeholders understand the project’s benefits and trade-offs. This fosters transparent communication, reducing resistance and regulatory delays <span class="citation" data-cites="adams2017 leising2018"><a href="#ref-adams2017" role="doc-biblioref">[8]</a>, <a href="#ref-leising2018" role="doc-biblioref">[10]</a></span>.</li>
</ul>
<p>During Planning, the integration of AI-driven simulations and VR-based stakeholder presentations can significantly refine decision-making, balancing financial feasibility with circular ambitions.</p>
</section>
<section id="execution" class="level3">
<h3 class="anchored" data-anchor-id="execution">4.3 Execution</h3>
<p><strong>Objective</strong>: Carry out the retrofit with minimal waste generation and minimal disruptions to building occupants or operations.</p>
<ul>
<li><strong>Real-Time IoT Monitoring</strong>: Placing sensors on-site during construction activities can track energy use, dust levels, and material flows. This data informs real-time corrective actions, such as rerouting demolition waste to appropriate recycling channels <span class="citation" data-cites="ding2019"><a href="#ref-ding2019" role="doc-biblioref">[21]</a></span>.<br>
</li>
<li><strong>BIM for Construction Management</strong>: The previously built 3D model (Assessment phase) extends into the job site, guiding contractors on demolition sequences that preserve salvageable materials <span class="citation" data-cites="volk2014 won2017"><a href="#ref-volk2014" role="doc-biblioref">[19]</a>, <a href="#ref-won2017" role="doc-biblioref">[20]</a></span>. Potential collisions or inefficiencies can be detected before they cause project slowdowns.</li>
</ul>
<p>By uniting BIM-based planning with IoT feedback, the Execution phase becomes safer, more resource-efficient, and less prone to last-minute design modifications that can inflate costs and waste.</p>
</section>
<section id="monitoring-optimization" class="level3">
<h3 class="anchored" data-anchor-id="monitoring-optimization">4.4 Monitoring &amp; Optimization</h3>
<p><strong>Objective</strong>: After the retrofit, ensure long-term sustainability and continuous improvement.</p>
<ul>
<li><strong>IoT Sensors and Building Automation</strong>: Smart systems measure factors like indoor temperature, energy consumption, and air quality, refining building operations to maintain or improve CE benefits over time <span class="citation" data-cites="ding2019"><a href="#ref-ding2019" role="doc-biblioref">[21]</a></span>.<br>
</li>
<li><strong>AI-Driven Optimization</strong>: Post-occupancy data can feed into machine learning models that detect anomalies (e.g., water leaks, HVAC inefficiencies) or predict maintenance needs <span class="citation" data-cites="ahmad2016"><a href="#ref-ahmad2016" role="doc-biblioref">[22]</a></span>. This proactive stance avoids premature material disposal and optimizes energy usage.<br>
</li>
<li><strong>Digital Twins</strong>: Serving as a “living” model of the building, the digital twin can test hypothetical changes—such as occupant load shifts or future expansions—without physically altering the structure <span class="citation" data-cites="lu2020"><a href="#ref-lu2020" role="doc-biblioref">[23]</a></span>.</li>
</ul>
<p>In this final phase, the building effectively becomes an evolving entity that can adapt to new regulations, occupant behaviors, and technological updates, thereby solidifying the retrofit’s circular and sustainable impact.</p>
</section>
</section>
<section id="potential-benefits-and-challenges" class="level2">
<h2 class="anchored" data-anchor-id="potential-benefits-and-challenges">5. Potential Benefits and Challenges</h2>
<section id="benefits-of-a-four-phase-digitally-enabled-retrofit" class="level3">
<h3 class="anchored" data-anchor-id="benefits-of-a-four-phase-digitally-enabled-retrofit">5.1 Benefits of a Four-Phase, Digitally Enabled Retrofit</h3>
<ol type="1">
<li><strong>Lifecycle Clarity</strong>: Many retrofit projects suffer from fragmented or reactive planning. By defining phases with distinct objectives—Assessment, Planning, Execution, Monitoring—stakeholders gain a clear roadmap.<br>
</li>
<li><strong>Improved Material Reuse</strong>: BIM-driven audits and IoT data about demolition progress allow for targeted deconstruction rather than wholesale demolition, significantly reducing waste.<br>
</li>
<li><strong>Energy-Efficiency Gains</strong>: By combining AI’s predictive analytics with ongoing IoT measurements, retrofitted buildings can continually improve their energy performance.<br>
</li>
<li><strong>Better Stakeholder Collaboration</strong>: VR-based engagement tools and common data environments reduce communication gaps, accelerating regulatory approvals and tenant acceptance <span class="citation" data-cites="adams2017 leising2018"><a href="#ref-adams2017" role="doc-biblioref">[8]</a>, <a href="#ref-leising2018" role="doc-biblioref">[10]</a></span>.</li>
</ol>
</section>
<section id="key-challenges-to-implementation" class="level3">
<h3 class="anchored" data-anchor-id="key-challenges-to-implementation">5.2 Key Challenges to Implementation</h3>
<ol type="1">
<li><strong>Cost and Training</strong>: Implementing advanced digital tools can entail steep initial expenditures, which may deter small or resource-constrained organizations <span class="citation" data-cites="adams2017 korhonen2018"><a href="#ref-adams2017" role="doc-biblioref">[8]</a>, <a href="#ref-korhonen2018" role="doc-biblioref">[9]</a></span>.<br>
</li>
<li><strong>Data Interoperability</strong>: Even with recognized open standards, ensuring consistent data exchange between different BIM, IoT, and AI platforms remains challenging <span class="citation" data-cites="hosseini2021"><a href="#ref-hosseini2021" role="doc-biblioref">[17]</a></span>.<br>
</li>
<li><strong>Regulatory Uncertainty</strong>: Local building codes often do not explicitly support circular strategies (like on-site material upcycling). Retrofits may therefore face permitting hurdles <span class="citation" data-cites="leising2018"><a href="#ref-leising2018" role="doc-biblioref">[10]</a></span>.<br>
</li>
<li><strong>Cultural Resistance</strong>: Ingrained linear mindsets can delay the adoption of new technologies or process changes, especially among project managers accustomed to conventional workflows <span class="citation" data-cites="hart2019"><a href="#ref-hart2019" role="doc-biblioref">[16]</a></span>.</li>
</ol>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">6. Conclusion</h2>
<p>This paper sets forth a four-phase digital integration framework aimed at systematically embedding Circular Economy principles in the retrofitting of existing buildings. By weaving together BIM, IoT, AI, and Digital Twins in a carefully structured lifecycle, the framework addresses the most pressing pain points—such as uncertain building conditions, potential waste streams, and long-term operational efficiency.</p>
<p>Within the proposed model:<br>
- <strong>Assessment</strong> captures baseline materials and conditions via scan-to-BIM and initial digital twin creation.<br>
- <strong>Planning</strong> refines the scope through AI-based scenario analysis and stakeholder buy-in with VR.<br>
- <strong>Execution</strong> ensures minimal material waste, aided by real-time IoT data and BIM-based site coordination.<br>
- <strong>Monitoring &amp; Optimization</strong> extends CE gains beyond the construction phase, harnessing IoT- and AI-driven feedback loops for continuous improvement.</p>
<p>While constraints like high initial costs, data fragmentation, and regulatory uncertainties remain, this structured approach clarifies how advanced digital tools can be leveraged in tandem to meet CE objectives. In particular, it underscores that a phased methodology—one that systematically builds on robust baseline data and fosters stakeholder support—can help align retrofit outcomes with circular aspirations.</p>
<p>Looking ahead, rigorous, real-world demonstrations of this framework would offer deeper validation. For instance, large multi-building projects could adopt the four-phase strategy across varied typologies, refining best practices for cost control, training protocols, and technology choices. Collaboration among governments, industry associations, and academics is essential, ensuring that building codes evolve to encourage reuse-oriented retrofitting. Ultimately, the success of these endeavors will help transform existing buildings from resource drains into sustainable assets that serve as integral parts of a more circular built environment.</p>



</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-iea2019" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">International Energy Agency, <span>“Global status report for buildings and construction.”</span> 2019.</div>
</div>
<div id="ref-unep2019" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">United Nations Environment Programme, <span>“Global status report for buildings and construction.”</span> 2019.</div>
</div>
<div id="ref-ding2016" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">T. Ding <em>et al.</em>, <span>“A closed-loop life cycle assessment of recycled aggregate concrete utilization in china,”</span> <em>Waste Management</em>, vol. 56, pp. 367–375, 2016.</div>
</div>
<div id="ref-lu2013" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">W. Lu and H. Yuan, <span>“Investigating waste reduction potential in the upstream processes of offshore prefabrication construction,”</span> <em>Renewable and Sustainable Energy Reviews</em>, vol. 28, pp. 804–811, 2013.</div>
</div>
<div id="ref-ellenmacarthur2013" class="csl-entry" role="listitem">
<div class="csl-left-margin">[5] </div><div class="csl-right-inline">Ellen MacArthur Foundation, <span>“Towards the circular economy vol. 1: An economic and business rationale for an accelerated transition.”</span> 2013.</div>
</div>
<div id="ref-kirchherr2017" class="csl-entry" role="listitem">
<div class="csl-left-margin">[6] </div><div class="csl-right-inline">J. Kirchherr, D. Reike, and M. Hekkert, <span>“Conceptualizing the circular economy: An analysis of 114 definitions,”</span> <em>Resources, Conservation and Recycling</em>, vol. 127, pp. 221–232, 2017.</div>
</div>
<div id="ref-pomponi2017" class="csl-entry" role="listitem">
<div class="csl-left-margin">[7] </div><div class="csl-right-inline">F. Pomponi and A. Moncaster, <span>“Circular economy for the built environment: A research framework,”</span> <em>Journal of Cleaner Production</em>, vol. 143, pp. 710–718, 2017.</div>
</div>
<div id="ref-adams2017" class="csl-entry" role="listitem">
<div class="csl-left-margin">[8] </div><div class="csl-right-inline">K. T. Adams, M. Osmani, and T. Thorpe, <span>“Circular economy in construction: Current awareness, challenges, and enablers,”</span> <em>Proceedings of the Institution of Civil Engineers—Waste and Resource Management</em>, vol. 170, no. 1, pp. 15–24, 2017.</div>
</div>
<div id="ref-korhonen2018" class="csl-entry" role="listitem">
<div class="csl-left-margin">[9] </div><div class="csl-right-inline">J. Korhonen, A. Honkasalo, and J. Seppälä, <span>“Circular economy: The concept and its limitations,”</span> <em>Ecological Economics</em>, vol. 143, pp. 37–46, 2018.</div>
</div>
<div id="ref-leising2018" class="csl-entry" role="listitem">
<div class="csl-left-margin">[10] </div><div class="csl-right-inline">E. Leising, J. Quist, and N. Bocken, <span>“Circular economy in the building sector: Three cases and a collaboration tool,”</span> <em>Journal of Cleaner Production</em>, vol. 176, pp. 976–989, 2018.</div>
</div>
<div id="ref-adams2022" class="csl-entry" role="listitem">
<div class="csl-left-margin">[11] </div><div class="csl-right-inline">K. T. Adams, M. Osmani, and T. Thorpe, <span>“Digitalisation and circular economy practices in construction,”</span> <em>Journal of Cleaner Production</em>, vol. 350, p. 131484, 2022.</div>
</div>
<div id="ref-akbarieh2020" class="csl-entry" role="listitem">
<div class="csl-left-margin">[12] </div><div class="csl-right-inline">A. H. Akbarieh <em>et al.</em>, <span>“Digital engineering of building information modelling for off-site manufacturing,”</span> <em>Automation in Construction</em>, vol. 112, p. 103044, 2020.</div>
</div>
<div id="ref-boje2020" class="csl-entry" role="listitem">
<div class="csl-left-margin">[13] </div><div class="csl-right-inline">C. Boje <em>et al.</em>, <span>“Towards a semantic construction digital twin: Directions for future research,”</span> <em>Automation in Construction</em>, vol. 114, p. 103179, 2020.</div>
</div>
<div id="ref-hossain2020" class="csl-entry" role="listitem">
<div class="csl-left-margin">[14] </div><div class="csl-right-inline">M. U. Hossain <em>et al.</em>, <span>“Circular economy and the construction industry: Existing trends, challenges and prospective framework for sustainable construction,”</span> <em>Renewable and Sustainable Energy Reviews</em>, vol. 130, p. 109948, 2020.</div>
</div>
<div id="ref-damico2021" class="csl-entry" role="listitem">
<div class="csl-left-margin">[15] </div><div class="csl-right-inline">B. D’Amico, F. Pomponi, and J. Hart, <span>“Integrating BIM and LCA for the circular economy: A systematic literature review,”</span> <em>Building and Environment</em>, vol. 196, p. 107790, 2021.</div>
</div>
<div id="ref-hart2019" class="csl-entry" role="listitem">
<div class="csl-left-margin">[16] </div><div class="csl-right-inline">J. Hart, K. T. Adams, J. Giesekam, D. Tingley, and F. Pomponi, <span>“Barriers and drivers in a circular economy: The case of the built environment,”</span> in <em>Procedia CIRP</em>, 2019.</div>
</div>
<div id="ref-hosseini2021" class="csl-entry" role="listitem">
<div class="csl-left-margin">[17] </div><div class="csl-right-inline">M. R. Hosseini <em>et al.</em>, <span>“BIM adoption within australian small and medium-sized enterprises (SMEs): An innovation diffusion model,”</span> <em>Construction Economics and Building</em>, vol. 21, no. 1, pp. 18–36, 2021.</div>
</div>
<div id="ref-geissdoerfer2017" class="csl-entry" role="listitem">
<div class="csl-left-margin">[18] </div><div class="csl-right-inline">M. Geissdoerfer, P. Savaget, N. M. P. Bocken, and E. J. Hultink, <span>“The circular economy – a new sustainability paradigm?”</span> <em>Journal of Cleaner Production</em>, vol. 143, pp. 757–768, 2017.</div>
</div>
<div id="ref-volk2014" class="csl-entry" role="listitem">
<div class="csl-left-margin">[19] </div><div class="csl-right-inline">R. Volk, J. Stengel, and F. Schultmann, <span>“Building information modeling (BIM) for existing buildings—literature review and future needs,”</span> <em>Automation in Construction</em>, vol. 38, pp. 109–127, 2014.</div>
</div>
<div id="ref-won2017" class="csl-entry" role="listitem">
<div class="csl-left-margin">[20] </div><div class="csl-right-inline">J. Won and J. C. Cheng, <span>“Identifying potential opportunities of building information modeling for construction and demolition waste management,”</span> <em>Automation in Construction</em>, vol. 79, pp. 3–18, 2017.</div>
</div>
<div id="ref-ding2019" class="csl-entry" role="listitem">
<div class="csl-left-margin">[21] </div><div class="csl-right-inline">L. Ding <em>et al.</em>, <span>“Smart buildings and construction 4.0: A systematic review,”</span> <em>Automation in Construction</em>, vol. 105, pp. 102–119, 2019.</div>
</div>
<div id="ref-ahmad2016" class="csl-entry" role="listitem">
<div class="csl-left-margin">[22] </div><div class="csl-right-inline">T. Ahmad, H. Chen, and Y. Guo, <span>“Review of the fourth industrial revolution’s impact on building design and operation,”</span> <em>Journal of Building Engineering</em>, vol. 6, pp. 105–112, 2016.</div>
</div>
<div id="ref-lu2020" class="csl-entry" role="listitem">
<div class="csl-left-margin">[23] </div><div class="csl-right-inline">Q. Lu, A. K. Parlikad, and J. M. Schooling, <span>“Digital twin-enabled anomaly detection for built asset monitoring in operation and maintenance,”</span> <em>Automation in Construction</em>, vol. 118, p. 103277, 2020.</div>
</div>
</div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-panahirad2025" class="csl-entry quarto-appendix-citeas" role="listitem">
<div class="">F.
Panahirad, <span>“A Comprehensive Digital Integration Framework for
Circular Economy in Existing Building Retrofits,”</span> in <em>4th
International congress on civil Engineering, Architecture, Building
Materials and Environment, Helsinki, Finland.</em>, Mar. 2025.
Available: <a href="https://f.panahirad.website/blog/posts/CE-Framework/">https://f.panahirad.website/blog/posts/CE-Framework/</a></div>
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = true;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/f\.panahirad\.website");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script src="../../../assets/js/darklight-image-switcher.js"></script>
<script src="../../../assets/js/toggle-sections.js"></script>
<!-- Preload Civilica dark/light logos -->
<link rel="preload" as="image" href="../../../assets/image/civilica.light.png">
<link rel="preload" as="image" href="../../../assets/image/civilica.dark.png">
<img src="../../../assets/image/civilica.light.png" style="display:none" alt="preload">
<img src="../../../assets/image/civilica.dark.png" style="display:none" alt="preload">




</body></html>